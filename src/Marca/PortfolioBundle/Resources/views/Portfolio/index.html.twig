{# Marca/PortfolioBundle/Resources/views/Portfolio/index.html.twig #}

{% extends 'MarcaPortfolioBundle::layout.html.twig' %}

{% block content %}
<script language="javascript">
$(document).ready(function() {

{% for portfolio in portfolioset.portfolioitems %} 
$('#port_{{portfolio.id}}').click(function(){
  $('#port_modal').load('{{ course_path('portfolio_show_modal', { 'id': portfolio.id}) }}');
  $('#port_modal').modal();
});
{% endfor %}
});
</script>

    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="list-group">
                    <h2>{{ portset.name }}</h2>
                    <p>{{ portset.description|raw }}</p>
                </div>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    {% for portitem in portset.portitem %}
                        <li class="list-group-item">
                            <h5>{{portitem.name}}</h5>
                            <p><em>{{portitem.description|raw}}</em></p>
                            {% for portfolio in portfolioset.portfolioitems if portfolio.portitem.name==portitem.name %}
                                <p>
                                    {% if portfolio.file.doc %}<i class="icon-edit"></i>
                                        <a href="{{ course_path('doc_show', { 'id': portfolio.file.doc.id, 'view':'window' }) }}" target="_blank">{{ portfolio.file.name }}</a>
                                    {% elseif portfolio.file.url %}<i class="icon-adjust"></i> <a href="{{ portfolio.file.url}}" target="_blank">{{ portfolio.file.name }}</a>
                                    {% else %}
                                        <i class="icon-file"></i> <a href="{{ course_path('file_view', { 'id': portfolio.file.id }) }}" title="View {{ portfolio.file.name }} (will open in a new window or tab)" target="_blank">{{ portfolio.file.name }}</a>
                                    {% endif %}
                                <span class="btn-group btn-group-xs pull-right">
                                    <a class="btn btn-primary btn-xs" href="{{ course_path('portfolio_edit', { 'id': portfolio.id }) }}">Change</a>
                                    <a class="btn btn-default btn-xs" id='port_{{portfolio.id}}' href="javascript:void(0);" title='Remove from portfolio'>Remove</a>
                                </span>
                                </p>
                            {% endfor %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="panel-footer">
            </div>
        </div>
    </div>

{# assessment display hidden for now
<div class="col-md-4 well hide">
<h2>{{ assessmentset.name }}</h2>{{ assessmentset.description|raw }}  
<hr/>     

{% for objective in assessmentset.objectives %}
<div class="col-md-3">
        <div class="row"><strong>{{ objective.objective|raw }}</strong>
        </div>  
        <div class="row">{{ objective.description|raw }}</div>
         <hr/>
</div>
{% endfor %}
</div>
 #}

{# Modal #}
<div id="port_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">     
</div>
{% endblock %}