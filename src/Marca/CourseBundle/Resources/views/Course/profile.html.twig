{# Marca/CourseBundle/Resources/views/Course/roll.html.twig #}

{% extends 'MarcaCourseBundle::layout.html.twig' %}

{% block content %}

<div class="col-md-12">
    <div class="col-md-6 center">

        {# next previous users on roll #}
        <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#profile_nav">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="profile_nav">
                {% for roll in roll %}
                    {% if loop.index == app.request.get('user') + 1 %}
                        <ul class="nav navbar-nav navbar-right">
                            <li>
                                <a  data-index="{{loop.index}}" data-id='{{roll.userid}}' href="{{ course_path('course_roll_profile', { 'rollid': roll.id, 'user': loop.index }) }}">{{roll.firstname}} {{roll.lastname}}<i class="glyphicon glyphicon-chevron-right"></i></a>
                            </li>
                        </ul>
                    {% endif %}
                    {% if loop.index == app.request.get('user') - 1 %}
                        <ul class="nav navbar-nav">
                            <li>
                                <a  data-index="{{loop.index}}" data-id='{{roll.userid}}' href="{{ course_path('course_roll_profile', { 'rollid': roll.id, 'user': loop.index }) }}"><i class="glyphicon glyphicon-chevron-left"></i>{{roll.firstname}} {{roll.lastname}}</a>
                            </li>
                        </ul>
                    {% endif %}
                {% endfor %}
                </ul>
            </div>
        </nav>



        <div class="panel panel-default">
            <div class="panel-body">
                <div>
                    <h2 class="margin-top-small" style="text-align:center;margin-bottom:15px;">{{ user.firstname }} {{ user.lastname }}  </h2>
                    <div class="col-md-12 " style="text-align:center;margin-bottom:15px;">
                        {% if user.photo != '' %}
                        <img class="img-thumbnail" style="width:50%;align:center;" src="{{ user.photo }}" alt="{{ user.firstname }} {{ user.lastname }}">
                        {% endif %}
                        <p><a class="" target="_blank" href="mailto:{{ user.email }}">{{ user.email }}</a></p>
                    </div>

                    <p>{{ user.bio|raw }}</p>

                    <hr class="marca-spacer" />

                    {% if user == app.user.username or role == 2 %}
                        <ul class="list-unstyled">
                            <li>Forums:  {{ countForums|length}}  (class average: {{ countCourseForums|length //roll|length}})</li>
                            <li>Comments:  {{ countComments|length}}  (class average: {{ countCourseComments|length//roll|length}})</li>
                            <li>Replies:  {{ countReplies|length}}  (class average: {{ countCourseReplies|length//roll|length}})</li>
                            <li>Total:  {{ countForums|length + countComments|length + countReplies|length }}  (class average: {{ (countCourseForums|length + countCourseComments|length +countCourseReplies|length) //roll|length }})</li>
                        </ul>


                        <ul class="list-unstyled">
                            <li>Journal entries:  {{ countJournals|length}} (class average: {{ countCourseJournals|length //roll|length}})</li>
                        </ul>


                        <ul class="list-unstyled">
                            <li>Files:  {{ countFiles|length}} (class average: {{ countCourseFiles|length //roll|length}})</li>
                        </ul>
                    {% endif%}
                </div>
            </div>

        </div>
    </div>

{% endblock %}


