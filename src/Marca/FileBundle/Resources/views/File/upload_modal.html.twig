{# Marca/FileBundle/Resources/views/File/upload.html.twig #}
<script language="javascript">
    $(document).ready(function () {
        $('#marca_filebundle_filetype_file').on('change', function () {
            var filename = $('input[type=file]').val().replace(/C:\\fakepath\\/i, '');
            var file = filename.substr(0, filename.lastIndexOf('.')) || filename;
            $('#marca_filebundle_filetype_name').val(file);
            var a=(this.files[0].size/1024/1024);
            var filesize = Math.round(a * 100) / 100
            if(a > 10) {
                alert('Your file is ' + filesize + ' MB.  It must be no larger than 10 MB.');
                $('#file_modal').modal('hide');
            };
        });
    });
</script>
<div class="modal-dialog">

    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <span class="modal-title">Upload</span>
        </div>

        {% if  app.request.attributes.get('_route')=='file_upload' %}
        {% set action %}{{ course_path('file_upload',{'resource' : app.request.get('resource')}) }}{% endset %}
        {% else %}
        {% set action %}{{ course_path('review_upload',{'fileid': app.request.get('fileid')}) }}{% endset %}
        {% endif %}
        <form action="{{ action }}" method="post" {{ form_enctype(form) }}>

                <div class="modal-body">
                    {{ form_errors(form) }}
                    <span class="btn btn-default btn-file">Select File {{ form_row (form.file) }}</span>
                    {{ form_row (form.file) }}
                    {{ form_row (form.name) }}
                    <div class="{% if app.request.attributes.get('_route')=='review_upload' %}hidden{% endif %}">{{ form_row (form.project) }}</div>
                    <div class="{% if app.request.attributes.get('_route')=='review_upload' %}hidden{% endif %}">{{ form_row (form.tag) }}</div>
                    <div class="{% if app.request.attributes.get('_route')=='review_upload' %}hidden{% endif %}">{{ form_row (form.access) }}</div>
                    {{ form_rest(form) }}
                </div>

                <div class="modal-footer">
                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary" type="submit">Update</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </form>
    </div>
    <!-- /.modal-content -->
</div><!-- /.modal-dialog -->
