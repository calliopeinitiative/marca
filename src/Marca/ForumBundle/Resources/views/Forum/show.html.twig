{# Marca/ForumBundle/Resources/views/Forum/show.html.twig #}

{% extends 'MarcaForumBundle::layout.html.twig' %}

{% block content %}
<div class="col-md-12">
  <div class="panel panel-default">
    <div class="panel-heading" >
         <span class="pull-right"><a class="close" title="Close this discussion" href="{{ course_path('forum') }}">&times;</a></span>
         <h2 class="inline-block margin-top-small marca-blue"><a class="forum_title" title="Open this discussion" href="{{ course_path('forum') }}">{{ forum.title }}</a></h2>
          
         <span class="margin-left">by {{ forum.user.firstname|capitalize }} {{ forum.user.lastname|capitalize }}</span>
         <p>Modified  {{ forum.updated|date('M d Y, h:ia') }}
         <span class="pull-right">
         <a class="btn btn-primary btn-sm margin-left" title="Comment on this discussion" href="{{ course_path('comment_new', { 'parentid': forum.id ,'forumid': forum.id }) }}">Comment</a>
         {% if forum.user==app.user %}<a class="btn btn-info btn-sm" title="Edit this discussion" href="{{ course_path('forum_edit', { 'id': forum.id }) }}">Edit</a>{% endif%}
         </span></p>
    </div>

     <div class="panel-body">
       <div class="margin-bottom">{{ forum.body|raw }}
       </div>


   {% for comment in forum.comments%}


       <div class="panel panel-default">
         <div class="panel-heading padding-bottom" >{{ comment.user.firstname|capitalize }} {{ comment.user.lastname|capitalize }} says:
         <span class="pull-right" >
          Modified  {{ comment.updated|date('M d Y, h:ia') }}
          <a class="btn btn-primary btn-sm margin-left"  title="Reply to this comment" href="{{ course_path('reply_new', { 'commentid': comment.id  }) }}">Reply</a>
         {% if comment.user==app.user %}<a class="btn btn-info btn-sm"  title="Edit this comment" href="{{ course_path('comment_edit', { 'id': comment.id, 'parentid': forum.id }) }}">Edit</a>{% endif%}
         </span>
         </div>

         <div class="panel-body">{{ comment.body|raw }}



         {% for reply in comment.replies%}

           <div class="panel panel-default">
             <div class="panel-heading padding-bottom" >{{ reply.user.firstname|capitalize }} {{ reply.user.lastname|capitalize }} says:
               <span class="pull-right" >
               Modified  {{ reply.updated|date('M d Y, h:ia') }}
               {% if reply.user==app.user %}
               <a class="btn btn-primary btn-sm margin-left"  title="Edit this reply" href="{{ course_path('reply_edit', { 'id': reply.id, 'commentid': comment.id }) }}">Edit</a>
               {% endif%}
               </span>
             </div>
                   
             <div class="panel-body" >{{ reply.body|raw }}
             </div>
           </div>


        {% endfor %}

         </div>
       </div>
{% endfor %}

{% endblock %}
